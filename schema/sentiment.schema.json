{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://example.com/schema/sentiment.schema.json",
  "title": "DailyCryptoSentiment",
  "type": "object",
  "additionalProperties": false,
  "properties": {
    "date": {
      "type": "string",
      "description": "Report date in YYYY-MM-DD",
      "pattern": "^\\d{4}-\\d{2}-\\d{2}$"
    },
    "universe": {
      "type": "array",
      "items": { "type": "string" }
    },
    "assets": {
      "type": "array",
      "items": { "$ref": "#/definitions/Asset" }
    },
    "macro_summary": {
      "type": "string"
    },
    "method_note": {
      "type": "string"
    }
  },
  "required": [
    "date",
    "universe",
    "assets",
    "macro_summary",
    "method_note"
  ],
  "definitions": {
    "SourceType": {
      "type": "string",
      "enum": ["social", "news", "onchain"]
    },
    "TopSignal": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "source": { "$ref": "#/definitions/SourceType" },
        "evidence": { "type": "string" }
      },
      "required": ["source", "evidence"]
    },
    "Asset": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "symbol": { "type": "string" },
        "sentiment": {
          "type": "string",
          "enum": ["bullish", "neutral", "bearish"]
        },
        "score": {
          "type": "number",
          "minimum": -1,
          "maximum": 1
        },
        "confidence": {
          "type": "number",
          "minimum": 0,
          "maximum": 1
        },
        "rationale": { "type": "string" },
        "top_signals": {
          "type": "array",
          "items": { "$ref": "#/definitions/TopSignal" }
        }
      },
      "required": [
        "symbol",
        "sentiment",
        "score",
        "confidence",
        "rationale",
        "top_signals"
      ]
    }
  }
}
